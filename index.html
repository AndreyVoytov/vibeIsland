<!-- index.html (обновлённый) -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Mini-Game</title>
  <style>
    :root{ --game-width:100vw; }                /* значение пересчитывается скриптом */
    html,body{ margin:0; height:100%; overflow:hidden; background:#000; }

    /* обёртка, в которой живут оба слоя игры */
    #gameWrapper{
      position:absolute;
      top:0; left:50%;
      transform:translateX(-50%);
      width:var(--game-width);      /* фиксируем ширину здесь */
      height:100%;
      overflow:hidden;              /* «режем» всё, что выходит за пределы игры */
    }

    .layer{
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      border:0;
    }
    #layoutLayer{ z-index:1; }
    #charLayer  { z-index:2; background:transparent; }
  </style>
</head>
<body>
  <div id="gameWrapper">
    <iframe id="layoutLayer" class="layer" src="layout.html"></iframe>
    <iframe id="charLayer"   class="layer" src="character.html"></iframe>
  </div>

  <script>
    /*  Делает «портретное окно» с чёрными полосами по бокам,
        если устройство повернули в ландшафт.                    */
    (function resizeGame(){
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const portraitRatio = 9 / 16;          // желаемое W/H в портретном режиме

      let gameW;
      if (vw > vh) {                         // ландшафт
        gameW = Math.floor(vh * portraitRatio);
      } else {                               // портрет
        gameW = vw;
      }

      document.documentElement
              .style.setProperty('--game-width', `${gameW}px`);
    })();

    window.addEventListener('resize', () => {
      /* debounce не нужен: пересчёт лёгкий */
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const portraitRatio = 9 / 16;
      const gameW = (vw > vh) ? Math.floor(vh * portraitRatio) : vw;
      document.documentElement
              .style.setProperty('--game-width', `${gameW}px`);
    });
  </script>
</body>
</html>
