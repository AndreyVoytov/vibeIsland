<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Mini-Game</title>
  <style>
    :root{ --game-width:100vw; }
    html,body{ margin:0; height:100%; overflow:hidden; background:#000; }

    #gameWrapper{
      position:absolute;
      top:0; left:50%;
      transform:translateX(-50%);
      width:var(--game-width);
      height:100%;
      overflow:hidden;
    }

    .layer{
      position:absolute;
      top:0; left:0;
      width:100%; height:100%;
      border:0;
    }
    /* порядок наложения */
    #mapLayer   { z-index:0; display:none; }   /* «невидимый» */
    #layoutLayer{ z-index:1; }
    #charLayer  { z-index:2; background:transparent; }
  </style>
</head>
<body>
  <div id="gameWrapper">
    <iframe id="mapLayer"   class="layer"></iframe>
    <iframe id="layoutLayer" class="layer"></iframe>
    <iframe id="charLayer"   class="layer"></iframe>
  </div>

  <script>
    /* ——— портретная рамка ——— */
    function setGameWidth(){
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const portrait = 9/16;
      const gameW = (vw>vh) ? Math.floor(vh*portrait) : vw;
      document.documentElement.style.setProperty('--game-width',`${gameW}px`);
    }
    setGameWidth();
    addEventListener('resize', setGameWidth);

    /* ——— загрузить map.html, а после него — слои игры ——— */
    const mapFrame = document.getElementById('mapLayer');
    mapFrame.src = 'map.html';
    mapFrame.onload = () => {
      document.getElementById('layoutLayer').src = 'layout.html';
      document.getElementById('charLayer').src   = 'character.html';
    };
  </script>
</body>
</html>
