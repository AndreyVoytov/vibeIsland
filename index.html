<!-- index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Portrait Game Shell</title>
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#000;       /* чёрные полосы по бокам в ландшафте */
  overflow:hidden;
}
#gameContainer{
  position:absolute;
  top:0;left:0;right:0;bottom:0;
  margin:auto;
  width:min(100vw,56.25vh);           /* соотношение 9:16 */
  height:calc(min(100vw,56.25vh)*16/9);
}
#gameContainer iframe{
  position:absolute;
  top:0;left:0;
  width:100%;
  height:100%;
  border:none;
}
#layoutFrame{pointer-events:none;}    /* чтобы события шли к character.html */
</style>
</head>
<body>
  <!-- layout грузим сразу -->
  <iframe id="layoutLayer" class="layer" src="layout.html"></iframe>
  <!-- char вставим ПОЗЖЕ, когда layout полностью загрузится -->
  <iframe id="charLayer"  class="layer" src="about:blank"></iframe>

  <script>
    const layout = document.getElementById('layoutLayer');
    const char   = document.getElementById('charLayer');

    /* как только layout запишет карту, ставим src для char-слоя */
    layout.addEventListener('load', () => {
      char.src = 'character.html';
    });
  </script>


<script>
function adjustContainer(){
  const c=document.getElementById('gameContainer');
  const vw=window.innerWidth, vh=window.innerHeight;
  const w=Math.min(vw, vh*0.5625);        /* 0.5625 = 9/16 */
  const h=w*16/9;
  c.style.width=w+'px';
  c.style.height=h+'px';
}
window.addEventListener('resize',adjustContainer);
adjustContainer();
</script>
</body>
</html>
